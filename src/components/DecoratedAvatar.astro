---
import { Picture } from "@astrojs/image/components";

const emojis = ["ğŸ“", "ğŸ§ª", "âœ", "ğŸ’»", "ğŸŒ¸", "ğŸ“·", "ğŸ¹", "ğŸ”§"];
const duration = 30; // seconds
---

<div class="relative inline-block">
  <Picture
    class="rounded-full shadow-[0_0_64px_theme(colors.sky.300)] md:shadow-[0_0_128px_theme(colors.sky.300)]"
    src="/me.jpg"
    alt="Nimo smiling at the camera"
    sizes="(max-width: 639.9px) 96px, (min-width: 640px) and (max-width: 768.9px) 192px, (min-width: 768px) 384px"
    widths={[96, 192, 384, 768]}
    aspectRatio="1:1"
  />

  <!-- SVG is 1.5x the size of the parent element -->
  <!-- Viewbox sets (0,0) at center of the parent element, and 1 unit = 1% of the parent element -->
  <svg
    class="absolute -top-1/4 -left-1/4 -bottom-1/4 -right-1/4"
    viewBox="-75 -75 150 150"
  >
    {
      emojis.map((emoji, index) => (
        <text text-anchor="middle" dominant-baseline="middle">
          {emoji}
          {/* By setting the `begin` attribute to a negative value we adjust the starting position of the emoji */}
          <animateMotion
            dur={`${duration}s`}
            begin={`-${(index / emojis.length) * duration}s`}
            repeatCount="indefinite"
          >
            <mpath xlink:href="#motionpath" />
          </animateMotion>
        </text>
      ))
    }

    <path
      id="motionpath"
      fill="none"
      d="
        M 0 0
        m 0 -50
        a 50 50 0 0 1 0 100
        a 50 50 0 0 1 0 -100
        "
    ></path>
  </svg>
</div>
